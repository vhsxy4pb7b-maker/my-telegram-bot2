# 脚本说明

## init_historical_data.py

### 功能
初始化历史数据统计脚本，用于在系统更新后统计所有历史记录并生成历史日切数据。

### 使用方法

```bash
python scripts/init_historical_data.py
```

### 功能说明

1. **自动检测日期范围**
   - 从订单表获取最早的订单日期和最晚的订单日期
   - 从收入记录表获取最早的收入日期和最晚的收入日期
   - 自动确定需要统计的日期范围

2. **批量处理历史数据**
   - 遍历日期范围内的每一天
   - 计算每天的日切数据（新增订单、完结订单、违约完成、利息、开销等）
   - 保存到 `daily_summary` 表

3. **智能跳过**
   - 如果某天的数据已存在，自动跳过，避免重复计算

4. **进度显示**
   - 每处理50天显示一次进度
   - 显示已处理、已跳过、错误的数量

5. **数据汇总**
   - 处理完成后显示所有历史数据的汇总统计

### 注意事项

- 首次运行可能需要较长时间，取决于历史数据量
- 建议在系统维护时间运行
- 如果中途中断，可以重新运行，已处理的数据会自动跳过

